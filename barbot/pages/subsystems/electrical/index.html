<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Electrical Subsytem - BarBot</title>
<meta name="description" content="A display of the process taken to ideate and create a drink dispensing  robot - BarBot.">



<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="BarBot">
<meta property="og:title" content="Electrical Subsytem">
<meta property="og:url" content="https://arturojoya.github.io/pie-2022-03/barbot/subsystems/electrical/">


  <meta property="og:description" content="A display of the process taken to ideate and create a drink dispensing  robot - BarBot.">












<link rel="canonical" href="https://arturojoya.github.io/pie-2022-03/barbot/subsystems/electrical/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": null,
      "url": "https://arturojoya.github.io/pie-2022-03/barbot/"
    
  }
</script>







<!-- end _includes/seo.html -->




<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/pie-2022-03/barbot/pages/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/pie-2022-03/barbot/">
          BarBot
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/pie-2022-03/barbot/">Home</a>
            </li><li class="masthead__menu-item">
              <a href="/pie-2022-03/barbot/context/">Context</a>
            </li><li class="masthead__menu-item">
              <a href="/pie-2022-03/barbot/implementation/">Implementation</a>
            </li><li class="masthead__menu-item">
              <a href="/pie-2022-03/barbot/subsystems/">Subsystems</a>
            </li><li class="masthead__menu-item">
              <a href="/pie-2022-03/barbot/aboutus/">About Us</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Electrical Subsytem">
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Electrical Subsytem
</h1>
          


        </header>
      

      <section class="page__content" itemprop="text">
        
        <p><img src="/pie-2022-03/barbot/images/sp3_electrical_system.PNG" alt="Full Schematic" />
<em>Figure 1: Full Schematic of the Barbot System</em></p>

<p>Barbot’s electronics can be divided into two main groups: user experience and functional.</p>

<h2 id="user-experience-electronics">User Experience Electronics</h2>

<p>The electronics involved in enhancing the user experience are powered and controlled by an Arduino Mega 2560 microprocessor. The microprocessor and this group of electronics is stored in a compartment isolated from the rest of the action in the following container.</p>

<p><img src="/pie-2022-03/barbot/images/ui_house.jpg" alt="UI Electronics" />
<em>Figure 2: User experience electronics in their compartment</em></p>

<p>Note, the resistors required to make the LEDs and buttons work are wired on the breadboard, thus fulfilling the schematics found n figure 1 and figure 4.</p>

<p><img src="/pie-2022-03/barbot/images/ui_face.jpg" alt="UI Face" />
<em>Figure 3: The interface that allows usability.</em></p>

<p>The red, yellow, and green LEDs here represent the state of the machine. The actual details of what these colors mean when they are on are explained in the <em><a href="/pie-2022-03/barbot/pages/context">Context</a></em> page under <em>“How Barbot works”</em>.</p>

<p>The blue and white LEDs represent a set of drinks that are being dispensed. These are more artiacts of the two-motor prototype of the barbot, where they once turned on to show which ingredient was being dispensed.</p>

<p>Barbot makes use of three buttons - select, confirm, and reset. The full detail on the functionality of these buttons is explained in the <em><a href="/pie-2022-03/barbot/pages/context">Context</a></em> page under <em>“How Barbot works”</em></p>

<p><img src="/pie-2022-03/barbot/images/bb_sch.PNG" alt="Breadboard System" />
<img src="/pie-2022-03/barbot/images/pot_sch.PNG" alt="Potentiometer" /></p>

<p><em>Figure 4: Schematic of the UX electronics above.</em></p>

<p><em>Figure 5: 10KΩ potentiometer used for user input</em></p>

<p>Despite being a very small schematic, the potentiometer is what allows the user to chose what beverage to get from the Barbot, and is thus a very crucial bit to our system.</p>

<p><img src="/pie-2022-03/barbot/images/lcd_sch.PNG" alt="LCD System" /></p>

<p><em>Figure 6: Our LCD system</em></p>

<p>We were able to scrounge an LCD screen that used an external chip to communicate to the Arduino through SPI. This simplified our electronics since we only needed to use the 2 SCL and SDA pins to connect the display to the Arduino. As per the schematic the SPI Controller is a PCF8574 and connects to the 8 digital pins of the LCD screen, which in our case was a HY1602E.</p>

<h2 id="functional-electronics">Functional Electronics</h2>

<p>Within functional electronics we have two main systems: power and actuation.</p>

<h3 id="power-electronics">Power Electronics</h3>

<p>The power that feeds the Barbot comes from a 24V Power Supply; we use a DPS-320AB-1A that supplies 24V at 13.33A, which is plenty for our applications.`We were able to hook this power supply to the wall using an IEC320 connection.</p>

<p><img src="/pie-2022-03/barbot/images/sdp_sch.PNG" alt="Step Down Schematic" />
<img src="/pie-2022-03/barbot/images/sdc_w.jpg" alt="Step Down Converter" />
<em>Figures 7 &amp; 8: 24V to 8V step down circuitry</em></p>

<p>Since we also need to power the Arduino, we divide the 24V current into a 24V path that eventually powers the stepper motors, and another path that goes through a LM2596 variable step-down buck converter to bring the voltage down to 8V. Here, the red wire is the 24V line, and the yellow wire is the 8V line. The choice for 8V was somewhat arbitrary, since we did not want to entirely underpower nor overpower the Arduino, where 5V and 12V are the low and high ranges for acceptable voltages the Arduinos can handle. The Arduino is powered by these 8V through a barrel jack that hooks into the Arduino.</p>

<p>The majority of the electronics run on 5V, thus the remaining power is supplied by the Arduino and distributed by using the breadboard power rails.</p>

<h3 id="actuation-electronics">Actuation Electronics</h3>

<p>In order to power and control our stepper motors, we need to use motor driver modules. We decided to use A4988 due to their low price and general efficacy. Specifically, we used these <a href="https://www.amazon.com/dp/B07BND65C8?psc=1&amp;ref=ppx_yo2ov_dt_b_product_details">A4988</a> which costed us only $10.38 for a 5 pack. Based on the pinouts we drew out the following schematic to design a compact motor driver board.</p>

<p><img src="/pie-2022-03/barbot/images/mb_sch.PNG" alt="Motor Board Schematic" />
<em>Figure 9: Schematic for 4-motor Motor Board circuitry</em></p>

<p>The design features 4 motor drivers that connect to the Arduino via direction, step, and enable pins. Note, the enable pins are active low, meaning that they are on (enabled) whenever there isn’t a signal written to the enable. Therefore, to turn them off means sending a high signal to the enable. The other two pins going to the are handled by the AccelStepper library. The 1a, 1b, 2a, 2b pins connect straight to the motors. The motors recive their 24V through the VMot terminal of the module, which is protected by a 100uF 50V electrolytic capacitor. The VDD is satisfied by the 5V proided from the Arduino.</p>

<p><img src="/pie-2022-03/barbot/images/pb_w.jpg" alt="Protoboard" />
<em>Figure 10: Protoboard of Motor Board circuitry</em></p>

<p>Originally, we were expecting to handle up to 6 motors, hence why the actual protoboard has enough room to fit 6 motor drivers. Important to note, I used 1x8 pin headers which was very tedious to hold in place and solder. Another caution is that you will need to solder on jumper wires for the enables. Using this design, an enable jumper wire soldered in the middle of the board can be shorted to the bottom right pin of the motor driver. Then, a jumper cable can connect the two ena pinouts.</p>

<p>It is worth noting that I used a separate perfboard to hould the power terminals. This was only done due to the smaller size of the perfboards.</p>

<p>One last note, make sure that the 5V ground and the 24V ground are connected (ideally in a copper pool). Not doing so may cause an overdraw in current since the grounds may be referenced differently.</p>

<table>
  <tbody>
    <tr>
      <td><a href="/pie-2022-03/barbot/subsystems/mechanical">Mechanical</a></td>
      <td> </td>
      <td><a href="/pie-2022-03/barbot/subsystems/firmware">Firmware</a></td>
    </tr>
  </tbody>
</table>

        
      </section>

      <footer class="page__meta">
        
        


        


      </footer>

      

      
    </div>

    
  </article>

  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 BarBot. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/pie-2022-03/barbot/pages/assets/js/main.min.js"></script>










  </body>
</html>
